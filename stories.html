<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Лента историй</title>
    <link rel="stylesheet" href="styles.css">
    <script src="scripts.js"></script>
    <script>
        window.onload = () => {
            const token = localStorage.getItem('authToken'); // Или используйте sessionStorage

            if (!token) {
            // Если токена нет, перенаправляем на страницу входа
                window.location.href = 'login.html'; // Укажи правильный путь к странице входа
                return; // Прекращаем выполнение скрипта
            }
            // Пример фильтров, которые можно передать в функцию
            const filters = {
                //name: 'story', // Фильтр по имени истории
            };
            loadStories(filters); // Загружаем истории с фильтрами при загрузке страницы
        

            document.getElementById('searchButton').addEventListener('click', async function () {
                const author = document.getElementById('searchInputName').value;
                const title = document.getElementById('searchInputTitle').value;
                const filters = {
                    author: `${author}`, // Фильтр по автору
                    title: `${title}`,
                };
                loadStories(filters)           
            });
        };
    </script>
</head>
<body>
<main>
    <header>
        <h1>Лента историй</h1>
        <nav>
                <a href="profile.html">Профиль</a>
                <a href="index.html">Выход</a>
        </nav>
    </header>
        <h2>Истории:</h2>
        <input type="text" id="searchInputName" class="searchInputName" placeholder="Поиск по автору истории"/>
        <input type="text" id="searchInputTitle" class="searchInputTitle" placeholder="Поиск по названию истории"/>
        <button id="searchButton" class="searchButton">Поиск</button>
        <div id="storiesContainer" class="storiesContainer">
            
        </div>
    
    <footer>
        <p>&copy; 2024 Все права защищены.</p>
    </footer>
</main>
</body>
</html>